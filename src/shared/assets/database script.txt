-- criacao do meu banco de dados

create table company (
	id serial primary key,
	social_name varchar(80) not null,
	active bool
);

create table account (
    id serial not null primary key,
    username varchar(20) not null,
    password text not null,
    active boolean,
    fk_company integer references company(id),
    unique(username)
);

create table customer (
    id serial not null primary key,
    fk_company integer references company(id),
    name varchar(70) not null,
    cellphone varchar(13),
    email varchar(200)    
);

alter table customer alter column fk_company set not null;

create table schedule (
	id serial primary key,
	fk_account integer not null,
	fk_customer integer not null,
	schedule_date timestamp,
	constraint fk_account foreign key(fk_account) references account(id),
	constraint fk_customer foreign key(fk_customer) references customer(id)
);

create table service (
    id serial primary key,
    description varchar(80) not null,
    service_minutes number,
    active boolean
);

create table schedule_service (
    id serial primary key,
    fk_schedule integer not null,
    fk_service integer not null,
    service_minutes integer,
    constraint fk_schedule foreign key(fk_schedule) references schedule(id),
    constraint fk_service foreign key(fk_service) references service(id)
);